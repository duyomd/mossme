function loading(e){let t=document.querySelector(".ajax-loading");t&&(e?t.classList.add("d-block"):t.classList.remove("d-block"))}function clearMsg(e){let t=e.querySelector(".error-message");t&&t.classList.remove("d-block");let s=e.querySelector(".success-message");s&&s.classList.remove("d-block")}!function(){"use strict";function e(e,s,o){fetch(s,{method:"POST",body:JSON.stringify(Object.fromEntries(o.entries())),headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(e=>{if(e.ok)return e.text();throw Error(`${e.status} ${e.statusText} ${e.url}`)}).then(o=>{let r=JSON.parse(o),a=document.getElementById("csrf-name").value,n=r.info,l=document.querySelectorAll("[id='"+a+"']");for(var c=0;c<l.length;c++)l[c].value=r.hash;if(!0==r.succeed){(function e(t,s){let o=t.querySelector(".error-message");if(o){o.classList.remove("d-block");var r=t.querySelector(".success-message");r.innerHTML=s,r.classList.add("d-block")}})(e,n),r.noResetForm||e.reset();let i=r.modalId;if(i){"bookmark-modal"==i&&window.location.href.indexOf("bookmarks")>0&&window.location.reload(!0);let d=bootstrap.Modal.getInstance(document.getElementById(i));d&&d.hide(),setToastMessage(n);let u=bootstrap.Toast.getInstance(".toast");u&&u.show()}else"function"==typeof loadTable&&(loadTable(parseAjaxResponse(r.responseJsonList)),callbackFunc(!1));loading(!1)}else if(n)t(e,n);else throw Error("Form submission failed and no error message returned from: "+s)}).catch(s=>{t(e,s)})}function t(e,t){let s=e.querySelector(".success-message");if(s){s.classList.remove("d-block");var o=e.querySelector(".error-message");o.innerHTML=t,o.classList.add("d-block"),loading(!1)}}document.querySelectorAll(".ajax-form").forEach(function(s){s.addEventListener("submit",function(s){s.preventDefault(),loading(!0);let o=this,r=o.getAttribute("action"),a=o.getAttribute("data-recaptcha-site-key");if(!r){t(o,"The form action property is not set!"),loading(!1);return}let n=new FormData(o);a?"undefined"!=typeof grecaptcha?grecaptcha.ready(function(){try{grecaptcha.execute(a,{action:"ajax_form_submit"}).then(t=>{n.set("recaptcha-response",t),e(o,r,n)})}catch(s){t(o,s)}}):t(o,"The reCaptcha javascript API url is not loaded!"):e(o,r,n)})})}();