function initMessageManager(T){window.addEventListener("load",()=>{initTable({FIELDS_FETCH:["id","read_state","sender","ip_address","user_language_code","language","name","email","subject","content","content_str","status","status_str","sent_at","sent_at_str"],FIELDS_TABLE:[{CONTENT_TYPE:CONTENT_TYPES.TEXT,CONTENT_FIELD:"id"},{CONTENT_TYPE:CONTENT_TYPES.IMAGE,CONTENT_FIELD:"read_state",CONTENT_FIELD_EXTRA:'item.read_state == 1 ? "" : "<i class=\'unread\'></i>";'},{CONTENT_TYPE:CONTENT_TYPES.TEXT,CONTENT_FIELD:"sender"},{CONTENT_TYPE:CONTENT_TYPES.TEXT,CONTENT_FIELD:"name"},{CONTENT_TYPE:CONTENT_TYPES.LINK,CONTENT_FIELD:"item.subject",CONTENT_FIELD_STICKY:"true",CONTENT_FIELD_EXTRA_HASH:'"content-modal"',CONTENT_FIELD_EXTRA_END:'data-bs-toggle="modal"',CONTENT_FIELD_EXTRA_ONCLICK:'"setModalContent(`" + encodeURIComponent(item.subject) + "`,`" + encodeURIComponent(item.content) + "`,`" + item.read_state + "`,`" + item.id + "`)"'},{CONTENT_TYPE:CONTENT_TYPES.TEXT,CONTENT_FIELD:"content",CONTENT_FIELD_EXTRA:"item.content_str"},{CONTENT_TYPE:CONTENT_TYPES.TEXT,CONTENT_FIELD:"email"},{CONTENT_TYPE:CONTENT_TYPES.TEXT,CONTENT_FIELD:"ip_address"},{CONTENT_TYPE:CONTENT_TYPES.TEXT,CONTENT_FIELD:"language"},{CONTENT_TYPE:CONTENT_TYPES.TEXT,CONTENT_FIELD:"status",CONTENT_FIELD_EXTRA:"item.status_str"},{CONTENT_TYPE:CONTENT_TYPES.TEXT,CONTENT_FIELD:"sent_at",CONTENT_FIELD_EXTRA:"item.sent_at_str"},],FIELDS_TABLE_HEADER:["",'<i class="bi bi-eye"></i>',T.MSG_SENDER,T.MSG_NAME,T.MSG_SUBJECT,T.MSG_CONTENT,T.MSG_EMAIL,T.MSG_IP,T.MSG_ULC,T.MSG_STATUS,T.MSG_SENT_AT],FIELDS_TABLE_ORDERBYS:["",T.ORDER_READ_STATE,T.ORDER_SENDER,T.ORDER_NAME,T.ORDER_SUBJECT,T.ORDER_CONTENT,T.ORDER_EMAIL,T.ORDER_IP,T.ORDER_ULC,T.ORDER_STATUS,T.ORDER_SENT_AT],RADIO_SHOW_BUTTON_IDS:["btn-modify","btn-delete"],noMove:!0})})}function setModalContent(T,E,e,t){document.querySelector("#content-modal-header").innerHTML=decodeURIComponent(T),document.querySelector("#content-modal-body").innerHTML=decodeURIComponent(E),"1"!=e&&markAsRead(t)}function markAsRead(T){var E=new XMLHttpRequest;E.onreadystatechange=function(){try{4==this.readyState&&(200==this.status&&(loadTable(parseAjaxResponse(this.responseText)),callbackFunc(!1)),loading(!1))}catch(T){loading(!1)}},E.open("GET","/"+_url+"/id="+T+"/p="+_currentSort.currentPage+"/orderby="+_currentSort.orderBys.toString()+"/sortorder="+_currentSort.sortOrders.toString()+"/conditions="+getConditions(),!0),E.send()}